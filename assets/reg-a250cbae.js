import{d as C,u as U,r as c,a as g,b as l,c as B,e,w as o,o as F,f as v,E as I,g as q,h as w,p as E,i as L,j as N}from"./index-8efee50f.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";const S=d=>(E("data-v-d0f0403e"),d=d(),L(),d),z={class:"cont"},T=S(()=>N("h3",{class:"title"},"👉 注册 👈",-1)),j=C({__name:"reg",setup(d){const x=U(),_=c(),m=c(!1);c("");const t=g({username:"",password:"",inviteCode:""}),b=g({username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]}),y=p=>{p&&p.validate(s=>{if(s){const i=I.service({lock:!0,text:"拼命加载中...",background:"rgba(0, 0, 0, 0.7)"});setTimeout(()=>{i.close()},1500),m.value=!0,console.log("submit!");const n={username:t.username,password:t.password,invite_code:t.inviteCode};q.post("https://glmapi.gaozih.top/api/user/register/",n).then(a=>{console.log(a.data),w({message:"注册成功！",type:"success"}),x.push("/")}).catch(a=>{console.error(a),w({message:"注册失败！",type:"warning"})})}else return console.log("error submit!"),!1})};return(p,s)=>{const i=l("User"),n=l("el-icon"),a=l("el-input"),u=l("el-form-item"),f=l("Lock"),h=l("router-link"),V=l("el-button"),k=l("el-form");return F(),B("div",z,[e(k,{ref_key:"ruleFormRef",ref:_,model:t,rules:b,class:"login-form","status-icon":""},{default:o(()=>[T,e(u,{prop:"username"},{default:o(()=>[e(a,{class:"input-with-select",modelValue:t.username,"onUpdate:modelValue":s[0]||(s[0]=r=>t.username=r),placeholder:"用户名",clearable:""},{prefix:o(()=>[e(n,null,{default:o(()=>[e(i)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"password"},{default:o(()=>[e(a,{type:"password",clearable:"",placeholder:"密码",modelValue:t.password,"onUpdate:modelValue":s[1]||(s[1]=r=>t.password=r),class:"input-with-select"},{prefix:o(()=>[e(n,null,{default:o(()=>[e(f)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"invite_code"},{default:o(()=>[e(a,{type:"password",clearable:"",placeholder:"邀请码",modelValue:t.inviteCode,"onUpdate:modelValue":s[2]||(s[2]=r=>t.inviteCode=r),class:"input-with-select"},{prefix:o(()=>[e(n,null,{default:o(()=>[e(f)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(h,{to:"/",style:{"text-decoration":"none",padding:"10px",color:"#4e89ff","font-size":"15px"}},{default:o(()=>[v(" 我有账号，快去登录 ")]),_:1}),e(u,{style:{"margin-top":"10px"}},{default:o(()=>[e(V,{loading:m.value,type:"primary",onClick:s[3]||(s[3]=r=>y(_.value)),style:{width:"100%"}},{default:o(()=>[v("注册")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])}}});const A=R(j,[["__scopeId","data-v-d0f0403e"]]);export{A as default};
