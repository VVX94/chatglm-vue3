import{d as S,r as i,k as H,b as k,c as g,j as t,F as U,l as y,m as T,v as q,n as _,e as u,w as v,E as V,g as h,q as O,o as p,t as X,s as G,x as W,f as j,p as Y,i as Z,h as $}from"./index-8efee50f.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";const te="/assets/profile_photo-2699fc2c.png",ae="data:image/png;base64,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",se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABDpJREFUWEftll9oW1Ucx7+/m40qUxBERh+KD51MUVrBFWcYwyL+YTTntsqKiAzHXJdzq3sY9J6kCHYPtblRVkWSNN1QcOjchNbcKFunHXupnbr6f5vgEBwy9lCrUsbWtLk/uWmy3cZkSSPSl92n5N7f+f4+53u+59xLWOGLVrg/bgJU5cBALP0E+biJGE0AmgE0ETDFhCkwnQE551RQ/6yW5awIYMXTr4E4XFGcaUAZgd6KdUUFZQEisY/9pGljAG7LjWGMgPCNg+xEWHacHIjZLRrQAh82ANQJ5jUAxoFsr5IdX1ULUhIgGk9tZaIjeZHvCdxtSn2inGgkaW+Cg33kAgGzAA2zkx0Jdbd/UQmkJICVsK8CqHMc3hvu1vsqibjPk8nk6r+y9QkQdhTqCTjhQNsfkm0fltP4F0A0bh9kwvMALigp7q6mubfGStiHAXQy42uinCNgppdCRiBWSmsJgDWUehxMx91CIjxnBsWh5QK8MWy3ZLNwrV/lANs14N28xitKiv5ivaUAifRugN8C0UcqGOhcbvNCvRW3IyAoMCxliJCVsHnRCW4LGfqnXt0iB+wkGF0E7DGlGKwVIL+DJgiYNKXwe0I9eeXe2zf3tbYueHJyvU00YZ9m4KEskb83GJgciKX6NI1e9YaxmntW7JP7oDlnAf5dSb3B7RAdsk8x42GA+pQM7C0JULBKSZFzpvDf/b2ce/1vptauqqNL3nHRRNpksAXw+0rqbshzV/ES/ATG/Rpzc4+h/1DNbF2R4rquZHJ1o1OfYcb5kCHuyTkQG32QNd+3RPjSDIqNZQDSR8C8FcA2JcXBWjNgxdPtIB4FcFRJscXVGRwcvSNzi+9PADNKijvLORABQ4EwrIJiV60AkURqhEAdzHg7ZIjdOYDksfqMk7kIYFpJcVdpgLi9EYRJ96HD2oaw0Ta1XIhocrSRHd/P+XPgsbAUJ3JLkLDbGEgDmFBSbCoJsBi89CGAn63VBWsov4wESwVFqNAokkiZBLIY9E5IBrzH9dI55mdw3pvgal241pz5O9Rhs9qhz7pjX39vbI1zee4UgAeIsdM0xIGyDni3X2HrVQKw3KXTaE8+wBdBrKugfrowLhq3e5nQT8BJU4pWr165t2Hu6PQC7DuQWrcwj7Xs+GYW5rMzv916aWadU/8kiLqYObAoyvMO85aw0f65t8m184T4GRXUR6oGAJEEsx8gP8CNN3aC9jPzaMgQR4vrig+46gGWKl0AYRoOGkAobKNpx+GYz6ed0+D7cc43/4eW0Zpz34/gX7XZv8d6erZdrgXgAwBPATwO0sYJGDeDgV8KPNZQ6mliepmBRyvk4woBhxl4oVyoK36U3qhBNG6/6BA9QuD1ANaDwUQ4w8BZImq4no1FlVKh/k8AlXaHe/pdXZjbpWm0k4DjphTbi8f8rwCVAN3nNwFW3IF/ABor/DCZOUhqAAAAAElFTkSuQmCC",oe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAf5JREFUWEfNlzFvE0EQhd+ctwYaCjpOd2NL0OUXkAoFiTKRqCAtqVJREtpUFFAiWkR6REFEaooICYFlzxWuKKhQKC120FpedD4ch7tZZK47aW/et292ZucIa35ozfr4PwEmk8m16XQ66ODOKTOftfluwYHhcHjdOXcIYLtNkNraE2bejO8ickNV7wO40uv1nhVF8akZdwFgPB4/IKKXAI6891/aQjjnPhRF8SZ8F8QBvAZwsxZnn5mf1uMuAIjIewC3mNl0Nuri3vsng8HgQEQCzDYRbZVl+TZCJAdo7PwzgB1mnrkpIkpEr8qyvPdPAJo7z7LsMYAZhPd+J7yr6mG/33+UHGCZ7aPR6KAGEc7CgiMBIkkKlonHHTYgfqcjmQMWcbMDVnETQBfxUAXzqjgypaCLeCzD2Bc6A3QVTwJgEU8FMGvVTRsvKrXa5aSdUyAiVwF8CxdV6Okx0N+Kmx0QkYcAnhPRHVXdjRD1dht7/nm3aKgCiwPB/g1mvlxV1VaEWNZekwM07L8N4NJc5ATA3kU7N5+BqqpKVRUAp6p67Jx7l+f5MRH9bDO0mFLQRih5ClKIm6vACjGftL+urALrULoKMsuyDQB3AWwyczi8syf1WL6K4QeAF8y8X1+0dPo1/JicC+Cc+5jn+ffmAtP4bT0Xf6QgRcC2MdbuwC+5OtswEE4TXQAAAABJRU5ErkJggg==",le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAActJREFUWEftl79LHEEUx9+bbURSWaa7No0wbxbOKsY/II0INiKkDFeoYK2ChVglxHRBbEXB0kZQ6703EOHE7qwsVCxE5JqdJwO3YXPcnnvrj212up2ZN+/zvrPMfAeh5IYl54ehAKy1cyKyAQAfM8CvROSXMcbPydVyA7RarbFOp3MBAN+ccw/9VldKfQCAbUSc11of5iHIDRBF0WoQBJ+11l8GLWytPY7j+DQMw9WhAZj5ByKO5wksOkdE/hLRQhL/nwK+ymTAV+srKZooHaeUWnHOrSV9aXUyt2BYKbNAoyiaVEodE1HfXC8CYOY6It5rrc/LAjgCgFsimn0XAGZeRsQdrfWNT8jMAgC/iaiRADBzg4i2ku9X3QKf0Dk3E4bhfhdgFwBuEoB+ySqASoHXVuDaOfe9zJ+wAihdgeogqhS4BIBFIjrodxt2D50lIvr6Jrdhs9kcNcY8pq5eD+T9gEn62u32SK1W67wJQK/psNb+FJE7Ivrn93rnFD6KvUMGgDoR1V9iTJl5EwCm0iql18v0hAk5Ip7EcZxZ4SC4IAgaIjLtHXHWO2Hgw8Ra+0lE/gDAREEVzkRk3RizlxWf+2VUEODZsNIBngAWHWU/HfLYugAAAABJRU5ErkJggg==",m=b=>(Y("data-v-c11514c8"),b=b(),Z(),b),ne=m(()=>t("header",null,[t("div",{class:"user-info"},[t("img",{class:"avatar",src:te,alt:"用户头像",width:"40",height:"40"}),t("span",{class:"user-name"},"GLM对话")])],-1)),ce=m(()=>t("div",{class:"logo"},[t("img",{class:"avatar",src:ae,alt:"Logo",width:"80",height:"75"})],-1)),re=m(()=>t("div",{class:"title"}," 智能问答 ",-1)),ie=["onClick"],Ae={class:"row-content"},de=m(()=>t("img",{src:se,alt:"image1",class:"row-image"},null,-1)),ge={class:"row-text"},ue=["onClick"],ve=m(()=>t("img",{src:le,alt:"image2",class:"row-image row-image-right"},null,-1)),he={class:"container"},pe={class:"count",id:"message-container"},me=["src","alt"],be={class:"input-container"},Ee=["onKeydown"],we={class:"dialog-footer"},fe=S({__name:"index",setup(b){const A=i(!1),E=i(""),n=i(""),C=i(""),w=i(""),R={access:localStorage.getItem("access"),refresh:localStorage.getItem("refresh")},f={"Content-Type":"application/json",Authorization:"Bearer "+R.access},o=i({}),B=i([]),D=e=>{e()},x=e=>{e==="add"?(w.value="新建对话",n.value="",A.value=!0):(C.value=e,w.value="编辑对话",n.value=e,A.value=!0)},P=()=>{const e=V.service({lock:!0,text:"拼命加载中...",background:"rgba(0, 0, 0, 0.7)"});if(w.value==="新建对话"){const a={avatar:"src/assets/img/user.png",alt:"User Avatar",bubbleClass:"user-bubble",content:n.value};o.value.hasOwnProperty(n.value)?o.value[n.value].push(a):o.value[n.value]=[a];const c={url:"https://glmapi.gaozih.top/api/archive/create/",data:{body:n.value},method:"post",headers:{Authorization:"Bearer "+R.access,"Content-Type":"application/json"}};h(c).then(l=>{const r={avatar:"src/assets/img/rboot.png",alt:"User Avatar",bubbleClass:"user-bubble",content:l.data.res};e.close(),o.value[n.value].push(r),console.log("创建成功",o.value)}).catch(l=>{console.error("创建失败",l)})}else o.value[n.value]=o.value[C.value],delete o.value[C.value];$({message:"操作成功",type:"success"}),A.value=!1},F=e=>{const a=o.value[e].id;h.delete(`https://glmapi.gaozih.top/api/archive/delete/${a}`,{headers:f}).then(c=>{console.log("删除成功",c)}).catch(c=>{console.error("删除失败",c)}),delete o.value[e]};function J(e){e.shiftKey||(e.preventDefault(),N())}const K=()=>{const e=V.service({lock:!0,text:"拼命加载中...",background:"rgba(0, 0, 0, 0.7)"});setTimeout(()=>{e.close()},1500),h.get("https://glmapi.gaozih.top/api/archive/list/",{headers:f}).then(a=>{document.getElementById("chatList"),a.data.forEach(c=>{const l={chatId:"",chatBody:""};l.chatId=c.id,l.chatBody=c.body;const r={avatar:"src/assets/img/user.png",alt:"User Avatar",bubbleClass:"user-bubble",content:l.chatBody};o.value.hasOwnProperty(n.value)?o.value[l.chatBody].push(r):o.value[l.chatBody]=[r],o.value[l.chatBody].id=l.chatId,h.get("https://glmapi.gaozih.top/api/archive/detail/"+l.chatId,{headers:f}).then(d=>{const s={avatar:"src/assets/img/rboot.png",alt:"User Avatar",bubbleClass:"user-bubble",content:d.data.res};o.value[l.chatBody].push(s),console.log(d.data)}).catch(d=>{console.error(d)}),console.log("创建成功",o.value),console.log(l)}),console.log(a.data)}).catch(a=>{console.error(a)})},M=e=>{B.value=o.value[e]},N=()=>{const e=V.service({lock:!0,text:"拼命加载中...",background:"rgba(0, 0, 0, 0.7)"});setTimeout(()=>{e.close()},1500),B.value.push({avatar:"src/assets/img/user.png",alt:"User Avatar",bubbleClass:"user-bubble",content:E.value}),E.value="",O(()=>{L()})},z=()=>{h.get("https://glmapi.gaozih.top/api/user/info/",{headers:f}).then(e=>{console.log(e.data)}).catch(e=>{console.error(e)})};H(()=>{z(),K();let e=localStorage.getItem("access"),a=localStorage.getItem("refresh");console.log("INdex.VUe----->取值access：",e),console.log("INdex.VUe----->取值refresh：",a)});function L(){const e=document.querySelector("#message-container");e.scrollTop=e.scrollHeight}return(e,a)=>{const c=k("el-popconfirm"),l=k("el-input"),r=k("el-button"),d=k("el-dialog");return p(),g(U,null,[t("div",null,[ne,t("nav",null,[t("div",null,[ce,re,t("div",{class:"button",onClick:a[0]||(a[0]=s=>x("add"))}," + 新建对话 "),(p(!0),g(U,null,y(Object.keys(o.value),(s,I)=>(p(),g("div",{class:"selectable-row",key:I,onClick:Q=>M(s)},[t("div",Ae,[de,t("span",ge,X(s),1),t("img",{src:oe,alt:"image2",class:"row-image row-image-right",onClick:Q=>x(s)},null,8,ue),u(c,{title:"确认删除吗?",onConfirm:Q=>F(s)},{reference:v(()=>[ve]),_:2},1032,["onConfirm"])])],8,ie))),128))])]),t("main",null,[t("div",he,[t("div",pe,[(p(!0),g(U,null,y(B.value,(s,I)=>(p(),g("div",{key:I,class:"message-container"},[t("img",{src:s.avatar,alt:s.alt,class:"user-avatar"},null,8,me),t("div",{class:G(s.bubbleClass)},X(s.content),3)]))),128))]),t("div",be,[T(t("textarea",{class:"input-box",placeholder:"在此输入您想了解的内容，shift+Enter换行","onUpdate:modelValue":a[1]||(a[1]=s=>E.value=s),onKeydown:_(W(J,["prevent"]),["enter"])},null,40,Ee),[[q,E.value]]),t("button",{class:"send-button",onClick:N},"发送")])])])]),u(d,{modelValue:A.value,"onUpdate:modelValue":a[4]||(a[4]=s=>A.value=s),title:w.value,width:"30%","before-close":D},{footer:v(()=>[t("span",we,[u(r,{onClick:a[3]||(a[3]=s=>A.value=!1)},{default:v(()=>[j("取消")]),_:1}),u(r,{type:"primary",onClick:P},{default:v(()=>[j(" 确认 ")]),_:1})])]),default:v(()=>[u(l,{modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=s=>n.value=s),maxlength:"100",placeholder:"请输入问题","show-word-limit":"",type:"textarea"},null,8,["modelValue"])]),_:1},8,["modelValue","title"])],64)}}});const Be=ee(fe,[["__scopeId","data-v-c11514c8"]]);export{Be as default};
